/*
	lets you modify the colors and use / add your own presets on Google's Minesweeper game.
	author: wuilly
*/

window.minesweeper={},window.minesweeper.colors={GRASS_DARK:"#AAD751",GRASS_LIGHT:"#A2D149",DUG_DARK:"#D7B899",DUG_LIGHT:"#E5C29F",WATER_DARK:"#83C4F7",WATER_LIGHT:"#90CAF9",NAVBAR_BG_COLOR:"#4A752C",TRY_AGAIN_BG_COLOR:"#4A752C"},window.minesweeper.presets={},window.minesweeper.presets.presets={},window.minesweeper.presets.vaildPreset=e=>{if(void 0===e||!e||e.length<1)throw new Error("No preset JSON found.");try{let r=JSON.parse(e);if("object"==typeof r&&!Array.isArray(r))return!0}catch(e){if(e)throw new Error("Not a vaild preset.")}},window.minesweeper.presets.addPreset=(e,r)=>{if(void 0===e||!e||e.length<1)throw new Error("No name found.");if(void 0===r||!r||r.length<1)throw new Error("No preset JSON found.");if("string"!=typeof e)throw new Error("Name isn't a string.");if(window.minesweeper.presets.presets.hasOwnProperty(e))throw new Error("You already added this preset.");if("object"!=typeof r||Array.isArray(r)){if("string"!=typeof r)throw new Error("Not a vaild preset.");if(!window.minesweeper.presets.vaildPreset(r))throw new Error("Not a vaild preset.");Object.defineProperty(window.minesweeper.presets.presets,e,{value:JSON.parse(r)})}else Object.defineProperty(window.minesweeper.presets.presets,e,{value:r})},window.minesweeper.presets.applyPreset=e=>{if(void 0===e||!e||e.length<1)throw new Error("No name found.");if(!window.minesweeper.presets.presets.hasOwnProperty(e))throw new Error("That preset doesn't exist. Maybe try adding it first?");window.minesweeper.colors=window.minesweeper.presets.presets[e],window.minesweeper.setColors()},window.minesweeper.presets.usePreset=window.minesweeper.presets.applyPreset,window.minesweeper.restore=()=>{window.minesweeper.colors={GRASS_DARK:"#AAD751",GRASS_LIGHT:"#A2D149",DUG_DARK:"#D7B899",DUG_LIGHT:"#E5C29F",WATER_DARK:"#83C4F7",WATER_LIGHT:"#90CAF9",NAVBAR_BG_COLOR:"#4A752C",TRY_AGAIN_BG_COLOR:"#4A752C"},window.minesweeper.setColors()},window.minesweeper.setColors=()=>{s_fpd=function(e,r,s){switch(document.getElementById("NWJp1d").style.backgroundColor=window.minesweeper.colors.NAVBAR_BG_COLOR,document.getElementsByClassName("HhuoRb")[0].style.backgroundColor=window.minesweeper.colors.TRY_AGAIN_BG_COLOR,s){case"GRASS":e.context.fillStyle=0==(r.x+r.y)%2?window.minesweeper.colors.GRASS_DARK:window.minesweeper.colors.GRASS_LIGHT,s_hpd(e,r);break;case"DUG":e.context.fillStyle=0==(r.x+r.y)%2?s_ipd(e,window.minesweeper.colors.DUG_LIGHT,window.minesweeper.colors.WATER_LIGHT,r):s_ipd(e,window.minesweeper.colors.DUG_DARK,window.minesweeper.colors.WATER_DARK,r),s_hpd(e,r);break;case"ADJACENT":s_fpd(e,r,"DUG"),s=.62*e.cellSize,e.context.font="bold "+s+"pt Roboto",e.context.textAlign="center";var o=e.oa[r.x][r.y].qI;e.context.fillStyle=s_ipd(e,s_jpd[o-1],0==(r.x+r.y)%2?"#90CAF9":"#83C4F7",r),e.context.fillText(o.toString(),r.x*e.cellSize+e.cellSize/2,r.y*e.cellSize+s+(e.cellSize-s)/2.1);break;case"FLAG":s_fpd(e,r,"GRASS"),e.Ps.render(Math.min(Math.floor(e.oa[r.x][r.y].HGa),9),new s_qg(r.x*e.cellSize,r.y*e.cellSize),new s_qg(0,0),0,e.cellSize/e.Ps.Qd());break;case"BAD_FLAG":s_fpd(e,r,"GRASS"),e.context.drawImage(e.Ht,r.x*e.cellSize,r.y*e.cellSize,e.cellSize,e.cellSize);break;case"DETONATED_MINE":e.context.fillStyle=e.oa[r.x][r.y].color,s_hpd(e,r),s_fpd(e,r,"MINE");break;case"MINE":e.context.fillStyle=s_HC(e.oa[r.x][r.y].color,.35),e.context.beginPath(),e.context.arc(r.x*e.cellSize+e.cellSize/2,r.y*e.cellSize+e.cellSize/2,e.cellSize/4,0,2*Math.PI,!1),e.context.fill()}}},window.minesweeper.presets.addPreset("dark",{GRASS_DARK:"#242730",GRASS_LIGHT:"#313742",DUG_DARK:"#D7B899",DUG_LIGHT:"#E5C29F",WATER_DARK:"#83C4F7",WATER_LIGHT:"#90CAF9",NAVBAR_BG_COLOR:"#343843",TRY_AGAIN_BG_COLOR:"#343843"}),window.minesweeper.presets.addPreset("dark2",{GRASS_DARK:GRASS_DARK="#555555",GRASS_LIGHT:GRASS_LIGHT="#333333",DUG_DARK:"#D7B899",DUG_LIGHT:"#E5C29F",WATER_DARK:"#83C4F7",WATER_LIGHT:"#90CAF9",NAVBAR_BG_COLOR:NAVBAR_BG_COLOR="#333333",TRY_AGAIN_BG_COLOR:TRY_AGAIN_BG_COLOR="#333333"});